<?xml version="1.0"?>
<indexer>

  <cases>
    <case recordType="NVRecordType1" variant="*" vtags="live" indexVersionless="true"/>
    <case recordType="VRecordType1" variant="*" vtags="live,preview,last" indexVersionless="true"/>
  </cases>

  <indexFields xmlns:ns="org.lilycms.indexer.test" xmlns:ns2="org.lilycms.indexer.test.2">

    <!--
       | These fields are about non-verioned things (nv_ prefix)
       -->
    <indexField name="nv_field1">
      <value>
        <field name="ns:nv_field1"/>
      </value>
    </indexField>

    <indexField name="nv_deref1">
      <value>
        <deref>
          <follow field="ns:nv_linkfield1"/>
          <field name="ns:nv_field1"/>
        </deref>
      </value>
    </indexField>

    <indexField name="nv_deref2">
      <value>
        <deref>
          <follow variant="-lang,-branch"/>
          <field name="ns:nv_field1"/>
        </deref>
      </value>
    </indexField>

    <indexField name="nv_deref3">
      <value>
        <deref>
          <follow variant="master"/>
          <field name="ns:nv_field1"/>
        </deref>
      </value>
    </indexField>

    <indexField name="nv_deref4">
      <value>
        <deref>
          <follow variant="-branch"/>
          <field name="ns:nv_field1"/>
        </deref>
      </value>
    </indexField>

    <!--
       | These fields are about verioned things (v_ prefix)
       -->
    <indexField name="v_field1">
      <value>
        <field name="ns2:v_field1"/>
      </value>
    </indexField>

    <indexField name="v_deref1">
      <value>
        <deref>
          <follow field="ns2:v_linkfield1"/>
          <field name="ns2:v_field1"/>
        </deref>
      </value>
    </indexField>

    <indexField name="v_deref2">
      <value>
        <deref>
          <follow variant="-lang,-branch"/>
          <field name="ns2:v_field1"/>
        </deref>
      </value>
    </indexField>

    <indexField name="v_deref3">
      <value>
        <deref>
          <follow variant="master"/>
          <field name="ns2:v_field1"/>
        </deref>
      </value>
    </indexField>

    <indexField name="v_deref4">
      <value>
        <deref>
          <follow variant="-branch"/>
          <field name="ns2:v_field1"/>
        </deref>
      </value>
    </indexField>

    <indexField name="nv_v_deref">
      <value>
        <deref>
          <follow field="ns:nv_linkfield2"/>
          <field name="ns2:v_field1"/>
        </deref>
      </value>
    </indexField>

  </indexFields>

</indexer>